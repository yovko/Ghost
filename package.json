{
  "name": "ghost-monorepo",
  "version": "0.0.0-private",
  "description": "The professional publishing platform",
  "private": true,
  "repository": "https://github.com/TryGhost/Ghost",
  "author": "Ghost Foundation",
  "license": "MIT",
  "workspaces": [
    "ghost/*",
    "e2e",
    "apps/*"
  ],
  "monorepo": {
    "public": false,
    "internalPackages": true,
    "repo": "https://github.com/TryGhost/Ghost",
    "scope": "@tryghost"
  },
  "eslintIgnore": [
    "**/node_modules/**"
  ],
  "scripts": {
    "archive": "nx run ghost:archive",
    "build": "nx run-many -t build",
    "build:clean": "nx reset && rimraf -g 'ghost/*/build' && rimraf -g 'ghost/*/tsconfig.tsbuildinfo'",
    "clean:hard": "node ./.github/scripts/clean.js",
    "dev": "nx run ghost-monorepo:docker:dev",
    "dev:lexical": "EDITOR_URL=http://localhost:2368/ghost/assets/koenig-lexical/ yarn dev",
    "dev:analytics": "DEV_COMPOSE_FILES='-f compose.dev.analytics.yaml' nx run ghost-monorepo:docker:dev",
    "dev:storage": "DEV_COMPOSE_FILES='-f compose.dev.storage.yaml' nx run ghost-monorepo:docker:dev",
    "dev:all": "DEV_COMPOSE_FILES='-f compose.dev.analytics.yaml -f compose.dev.storage.yaml' nx run ghost-monorepo:docker:dev",
    "fix": "yarn cache clean && rimraf -g '**/node_modules' && yarn && yarn nx reset",
    "knex-migrator": "yarn workspace ghost run knex-migrator",
    "setup": "yarn && git submodule update --init && NODE_ENV=development node .github/scripts/setup.js",
    "reset:data": "docker exec ghost-dev bash -c 'cd /home/ghost/ghost/core && node index.js generate-data --clear-database --quantities members:1000,posts:100 --seed 123'",
    "reset:data:empty": "docker exec ghost-dev bash -c 'cd /home/ghost/ghost/core && node index.js generate-data --clear-database --quantities members:0,posts:0 --seed 123'",
    "reset:data:xxl": "docker exec ghost-dev bash -c 'cd /home/ghost/ghost/core && node index.js generate-data --clear-database --quantities members:2000000,posts:0,emails:0,members_stripe_customers:0,members_login_events:0,members_status_events:0 --seed 123'",
    "docker:build": "docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} build",
    "docker:clean": "docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} --profile all down -v --remove-orphans --rmi local",
    "docker:down": "docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} down",
    "lint": "nx run-many -t lint",
    "test": "nx run-many -t test",
    "test:unit": "nx run-many -t test:unit",
    "test:browser": "node ghost/core/test/scripts/browser-test-runner.js --",
    "test:e2e": "yarn workspace @tryghost/e2e test",
    "test:e2e:analytics": "yarn workspace @tryghost/e2e test:analytics",
    "test:e2e:all": "yarn workspace @tryghost/e2e test:all",  
    "test:e2e:debug": "DEBUG=@tryghost/e2e:* yarn test:e2e",
    "main": "yarn main:monorepo && yarn main:submodules",
    "main:monorepo": "git checkout main && git pull ${GHOST_UPSTREAM:-origin} main && yarn",
    "main:submodules": "git submodule sync && git submodule update && git submodule foreach \"git checkout main && git pull ${GHOST_UPSTREAM:-origin} main\"",
    "prepare": "husky install .github/hooks",
    "tb": "tb local start && cd ghost/core/core/server/data/tinybird && tb dev",
    "tb:install": "curl https://tinybird.co | sh",
    "data:analytics:generate": "node ghost/core/core/server/data/tinybird/scripts/docker-analytics-manager.js generate",
    "data:analytics:clear": "node ghost/core/core/server/data/tinybird/scripts/docker-analytics-manager.js clear"
  },
  "resolutions": {
    "@tryghost/errors": "^1.3.7",
    "@tryghost/logging": "2.5.0",
    "jackspeak": "2.3.6",
    "moment": "2.24.0",
    "moment-timezone": "0.5.45",
    "nwsapi": "2.2.12"
  },
  "lint-staged": {
    "*.js": "eslint"
  },
  "devDependencies": {
    "@actions/core": "1.11.1",
    "chalk": "4.1.2",
    "chokidar": "3.6.0",
    "concurrently": "8.2.2",
    "eslint": "8.57.1",
    "eslint-plugin-ghost": "3.4.4",
    "eslint-plugin-react": "7.37.5",
    "husky": "8.0.3",
    "inquirer": "8.2.7",
    "jsonc-parser": "3.3.1",
    "lint-staged": "15.5.2",
    "nx": "22.0.4",
    "rimraf": "5.0.10",
    "typescript": "5.8.3"
  },
  "dependencies": {},
  "nx": {
    "includedScripts": [],
    "targets": {
      "docker:up": {
        "executor": "nx:run-commands",
        "options": {
          "command": "docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} up -d --force-recreate --wait"
        },
        "dependsOn": [
          "docker:build"
        ]
      },
      "docker:down": {
        "executor": "nx:run-commands",
        "options": {
          "command": "docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} down"
        }
      },
      "docker:build": {
        "executor": "nx:run-commands",
        "options": {
          "command": "docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} build"
        }
      },
      "docker:dev": {
        "continuous": true,
        "executor": "nx:run-commands",
        "options": {
          "command": "trap 'docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} down' EXIT; docker compose -f compose.dev.yaml ${DEV_COMPOSE_FILES} logs -f"
        },
        "dependsOn": [
          "docker:up",
          {
            "target": "dev",
            "projects": [
              "@tryghost/admin",
              "@tryghost/portal",
              "@tryghost/comments-ui",
              "@tryghost/signup-form",
              "@tryghost/sodo-search",
              "@tryghost/announcement-bar",
              "@tryghost/parse-email-address"
            ]
          }
        ]
      }
    }
  }
}
